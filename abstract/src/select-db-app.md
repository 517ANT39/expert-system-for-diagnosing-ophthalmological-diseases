# Выбор базы данных приложения

## Контекст
Приложение экспертной системы должно хранить структурированные данные: учетные записи пользователей, истории обследований и результаты диагностики [[10](./sources.md#ref10)].  
Требуется надежное, масштабируемое и поддерживаемое решение для работы с реляционными данными, обеспечивающее целостность и возможность сложных запросов [[11](./sources.md#ref11)].

## Факторы, влияющие на принятие решений
- Обеспечение транзакционной целостности и соответствие ACID. Система должна корректно обрабатывать до 500 одновременных операций без потери данных [[12](./sources.md#ref12)].  
- Возможность работы с гибкими типами данных (например, JSON, массивы). Требуется возможность хранения до 1000 различных полей в одной записи, включая текстовые и числовые данные [[10](./sources.md#ref10)].  
- Эффективная обработка сложных выборок и агрегированных запросов. Среднее время выполнения выборки с 50 связными таблицами не должно превышать 150 мс [[11](./sources.md#ref11)].  
- Масштабируемость и возможность расширения функционала системы. Необходимо поддерживать до 200 одновременных подключений и обработку увеличивающегося объема данных без снижения производительности [[12](./sources.md#ref12)].

## Рассмотренные варианты
- **SQLite**: Легковесная встроенная СУБД, подходит для прототипов, но не для многопользовательских систем и сложных транзакций [[[10](./sources.md#ref10)],[[13](./sources.md#ref13)]].  
- **MySQL**: Реляционная СУБД, оптимизированная для чтения, ограниченная поддержка сложных типов данных и транзакций [[11](./sources.md#ref11)].  
- **PostgreSQL**: Объектно-реляционная СУБД с полной поддержкой ACID, сложных типов данных и расширенных транзакций, способная обрабатывать более 500 одновременных транзакций и сложные выборки в пределах 120 мс [[12](./sources.md#ref12)].

## Результат решения
**Выбор сделан:** "PostgreSQL", поскольку это единственный вариант, который полностью удовлетворяет критическим требованиям к целостности транзакций [[12](./sources.md#ref12)], поддержке сложных типов данных [[10](./sources.md#ref10)] и эффективной обработке сложных запросов [[11](./sources.md#ref11)], обеспечивая при этом масштабируемость для будущего роста [[12](./sources.md#ref12)].

## Последствия

**Положительные**

- Обеспечение надежного и корректного хранения структурированных данных пользователей и историй пациентов [[12](./sources.md#ref12)].  
- Поддержка расширяемых и гибких схем данных (JSON, массивы) [[10](./sources.md#ref10)], позволяющая хранить до 1000 полей в одной записи.  
- Возможность обработки сложных выборок и агрегированных данных без потери производительности; среднее время выполнения сложной выборки около 120–150 мс [[11](./sources.md#ref11)].  
- Масштабируемость системы при увеличении нагрузки, поддержка до 200 одновременных соединений [[12](./sources.md#ref12)].  

**Отрицательные**

- Требует отдельного серверного процесса и администрирования [[12](./sources.md#ref12)].  
- Повышенные требования к ресурсам по сравнению с легковесными СУБД, такими как SQLite [[[11](./sources.md#ref11)],[[13](./sources.md#ref13)]].
