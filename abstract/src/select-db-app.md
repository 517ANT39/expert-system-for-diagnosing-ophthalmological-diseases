# Выбор базы данных приложения

## Контекст
Приложение экспертной системы должно хранить структурированные данные: учетные записи пользователей, истории обследований и результаты диагностики [[5](./sources.md#ref5)].  
Требуется надежное, масштабируемое и поддерживаемое решение для работы с реляционными данными, обеспечивающее целостность и возможность сложных запросов [[6](./sources.md#ref6)].

## Факторы, влияющие на принятие решений
- Обеспечение транзакционной целостности и соответствие ACID. Система должна корректно обрабатывать до 500 одновременных операций без потери данных [[7](./sources.md#ref7)].  
- Возможность работы с гибкими типами данных (например, JSON, массивы). Требуется возможность хранения до 1000 различных полей в одной записи, включая текстовые и числовые данные [[5](./sources.md#ref5)].  
- Эффективная обработка сложных выборок и агрегированных запросов. Среднее время выполнения выборки с 50 связными таблицами не должно превышать 150 мс [[6](./sources.md#ref6)].  
- Масштабируемость и возможность расширения функционала системы. Необходимо поддерживать до 200 одновременных подключений и обработку увеличивающегося объема данных без снижения производительности [[7](./sources.md#ref7)].

## Рассмотренные варианты
- **SQLite**: Легковесная встроенная СУБД, подходит для прототипов, но не для многопользовательских систем и сложных транзакций [[5](./sources.md#ref5)].  
- **MySQL**: Популярная реляционная СУБД, оптимизированная для чтения, ограниченная поддержка сложных типов данных и транзакций [[6](./sources.md#ref6)].  
- **PostgreSQL**: Объектно-реляционная СУБД с полной поддержкой ACID, сложных типов данных и расширенных транзакций, способная обрабатывать более 500 одновременных транзакций и сложные выборки в пределах 120 мс [[7](./sources.md#ref7)].

## Результат решения
**Выбор сделан:** "PostgreSQL", поскольку это единственный вариант, который полностью удовлетворяет критическим требованиям к целостности транзакций [[7](./sources.md#ref7)], поддержке сложных типов данных [[5](./sources.md#ref5)] и эффективной обработке сложных запросов [[6](./sources.md#ref6)], обеспечивая при этом масштабируемость для будущего роста [[7](./sources.md#ref7)].

## Последствия

**Положительные**

- Обеспечение надежного и корректного хранения структурированных данных пользователей и историй пациентов [[7](./sources.md#ref7)].  
- Поддержка расширяемых и гибких схем данных (JSON, массивы) [[5](./sources.md#ref5)], позволяющая хранить до 1000 полей в одной записи.  
- Возможность обработки сложных выборок и агрегированных данных без потери производительности; среднее время выполнения сложной выборки около 120–150 мс [[6](./sources.md#ref6)].  
- Масштабируемость системы при увеличении нагрузки, поддержка до 200 одновременных соединений [[7](./sources.md#ref7)].  

**Отрицательные**

- Требует отдельного серверного процесса и администрирования [[7](./sources.md#ref7)].  
- Не предназначена для хранения графовых структур, которые используются для модели принятия решений (для этого потребуется Neo4j) [[5](./sources.md#ref5)].  
- Повышенные требования к ресурсам по сравнению с легковесными СУБД, такими как SQLite [[6](./sources.md#ref6)].
