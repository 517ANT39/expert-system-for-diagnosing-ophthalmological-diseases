# Выбор хранилища данных для базы знаний

## Контекст
Экспертная система для дифференциальной диагностики использует граф принятия решений, где узлы представляют диагностические вопросы или состояния, а рёбра — возможные переходы на основе ответов "Да"/"Нет" [[8](./sources.md#ref8)].  
Необходимо выбрать базу данных, которая обеспечивает эффективное хранение графовых структур, быстрый доступ и выполнение стандартных алгоритмов обхода [[9](./sources.md#ref9)].

## Факторы, влияющие на принятие решений
- Эффективное хранение и быстрый обход графовых структур. Система должна обеспечивать обход до 10 000 узлов за менее чем 200 мс [[8](./sources.md#ref8)].  
- Поддержка специализированных графовых операций и алгоритмов (DFS, BFS). Необходимо выполнять стандартные алгоритмы без значительных затрат ресурсов [[9](./sources.md#ref9)].  
- Удобный декларативный язык запросов для работы с графами. Язык Cypher должен быть интуитивно понятным и позволять легко формулировать сложные графовые запросы [[10](./sources.md#ref10)].  
- Независимость от облачных платформ и минимизация стоимости развертывания. Желательна возможность локального развертывания с низкой стоимостью эксплуатации [[11](./sources.md#ref11)].

## Рассмотренные варианты
- **Amazon Neptune:** Управляемая графовая БД от AWS, высокая производительность, но привязка к экосистеме Amazon и высокая стоимость [[8](./sources.md#ref8)].  
- **ArangoDB:** Мультимодельная СУБД, поддерживает графы, документы и key-value, но менее специализирована для чистых графовых операций [[9](./sources.md#ref9)].  
- **Neo4j:** Нативная графовая СУБД с декларативным языком Cypher, оптимизированная для работы с графами и алгоритмами обхода, обеспечивающая интуитивный доступ к графовым структурам [[10](./sources.md#ref10)].

## Результат решения
**Выбор сделан:** "Neo4j", поскольку это единственный вариант, который обеспечивает встроенную поддержку графовых структур, эффективные алгоритмы обхода и интуитивно понятный язык запросов (Cypher), подходящий для представления и запроса графа решений [[10](./sources.md#ref10)].

## Последствия

**Положительные**

- Эффективное выполнение алгоритмов обхода графа (DFS, BFS), критичных для навигации по графу решений [[8](./sources.md#ref8)]; среднее время обхода 10 000 узлов — около 180–200 мс.  
- Интуитивно понятный язык запросов Cypher упрощает разработку и поддержку графовой модели [[10](./sources.md#ref10)].  
- Оптимизация хранения и доступа к графовым структурам без сложных JOIN-ов [[9](./sources.md#ref9)].  
- Независимость от облачных платформ и гибкость развертывания локально или на сервере проекта [[11](./sources.md#ref11)].

**Отрицательные**

- Не предназначена для хранения больших объемов структурированных данных пользователей и историй пациентов (для этого используется PostgreSQL) [[8](./sources.md#ref8)].  
- Требует отдельного сервера или контейнера для работы и администрирования [[10](./sources.md#ref10)].  
- Порог изучения Cypher выше, чем у стандартного SQL для разработчиков, ранее не работавших с графовыми СУБД [[11](./sources.md#ref11)].
